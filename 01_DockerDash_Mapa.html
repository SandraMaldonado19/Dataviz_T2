

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Dash App para Mapas &#8212; Introducción a Dash y a Series de tiempo</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=c5ced968eda925caa686" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=c5ced968eda925caa686" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=c5ced968eda925caa686" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=c5ced968eda925caa686" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=c5ced968eda925caa686" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=c5ced968eda925caa686" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=c5ced968eda925caa686"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '01_DockerDash_Mapa';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dash Financiero" href="02_DockerDash_Financiero.html" />
    <link rel="prev" title="Despliegue de aplicaciones con Docker" href="00_Despliegue_apps.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logouninorte.png" class="logo__image only-light" alt="Introducción a Dash y a Series de tiempo - Home"/>
    <script>document.write(`<img src="_static/logouninorte.png" class="logo__image only-dark" alt="Introducción a Dash y a Series de tiempo - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="README.html">
                    Introducción a Dash Y Series de tiempo
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="00_Despliegue_apps.html">Despliegue de aplicaciones con Docker</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Dash App para Mapas</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_DockerDash_Financiero.html">Dash Financiero</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_ModeloPredictivo.html">Modelo predictivo con series de tiempo</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/SandraMaldonado19/Dataviz_T2.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/SandraMaldonado19/Dataviz_T2.git/issues/new?title=Issue%20on%20page%20%2F01_DockerDash_Mapa.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/01_DockerDash_Mapa.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Dash App para Mapas</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construccion-de-la-aplicacion">Construcción de la aplicación</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importacion-de-requerimientos-y-cargue-de-datos">Importación de requerimientos y cargue de datos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#diseno-y-estructura-de-la-aplicacion-dash">Diseño y estructura de la aplicación Dash</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizacion-de-graficos-y-tablas">Actualización de gráficos y tablas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-de-la-aplicacion">Test de la aplicación</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#archivo-de-requerimientos-y-dockerfile">Archivo de requerimientos y Dockerfile</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="dash-app-para-mapas">
<h1>Dash App para Mapas<a class="headerlink" href="#dash-app-para-mapas" title="Permalink to this heading">#</a></h1>
<section id="construccion-de-la-aplicacion">
<h2>Construcción de la aplicación<a class="headerlink" href="#construccion-de-la-aplicacion" title="Permalink to this heading">#</a></h2>
<p>La primera aplicación de ejemplo desplegada tiene como objetivo de visualización xxxxx. La estructura del código se puede dividir en 4 partes.</p>
<section id="importacion-de-requerimientos-y-cargue-de-datos">
<h3>Importación de requerimientos y cargue de datos<a class="headerlink" href="#importacion-de-requerimientos-y-cargue-de-datos" title="Permalink to this heading">#</a></h3>
<p>Con respecto al código original, se realizaron algunas modificaciones relacionadas con la importación de librerías y módulos adicionales. Se importó <code class="docutils literal notranslate"><span class="pre">dash_bootstrap_components</span></code> con el alias de <code class="docutils literal notranslate"><span class="pre">dbc</span></code>. Esta librería permite utilizar estilos de Bootstrap en la aplicación Dash para mejorar el diseño y la organización de la interfaz de usuario.</p>
<p>Asimismo, se cambió el tema de la aplicación utilizando la propiedad <code class="docutils literal notranslate"><span class="pre">external_stylesheets</span></code> al definir la instancia de dash.Dash. El tema “Flatly” de Dash Bootstrap Components se estableció como el tema de la aplicación. Esto cambia la apariencia general de la aplicación según ese tema de Bootstrap.</p>
<p>La lectura de datos y su procesamiento se mantuvieron sin cambios en comparación con el código original. Los datos se leen desde una URL, se realiza una agrupación por columnas específicas y se reinician los índices para su uso en la aplicación.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>
<span class="kn">import</span> <span class="nn">dash_bootstrap_components</span> <span class="k">as</span> <span class="nn">dbc</span>  <span class="c1"># Librería para estilos Bootstrap</span>
<span class="kn">import</span> <span class="nn">dash_table</span>

<span class="c1"># Cambiar el tema de la aplicación a &quot;Flatly&quot; de Dash Bootstrap Components</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">dbc</span><span class="o">.</span><span class="n">themes</span><span class="o">.</span><span class="n">FLATLY</span><span class="p">])</span>

<span class="c1"># Leer los datos</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/intro_bees.csv&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;ANSI&#39;</span><span class="p">,</span> <span class="s1">&#39;Affected by&#39;</span><span class="p">,</span> <span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;state_code&#39;</span><span class="p">])[[</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="diseno-y-estructura-de-la-aplicacion-dash">
<h3>Diseño y estructura de la aplicación Dash<a class="headerlink" href="#diseno-y-estructura-de-la-aplicacion-dash" title="Permalink to this heading">#</a></h3>
<p>En esta fracción del código encargada del diseño y la estructura de la aplicación, se realizaron los siguientes cambios:</p>
<ul class="simple">
<li><p>Se envolvió todo el diseño de la aplicación en un contenedor <code class="docutils literal notranslate"><span class="pre">dbc.Container.</span></code> Esto se hace para aplicar estilos de <code class="docutils literal notranslate"><span class="pre">Bootstrap</span></code> y asegurarse de que el diseño sea receptivo y bien organizado en diferentes tamaños de pantalla. La propiedad <code class="docutils literal notranslate"><span class="pre">fluid=True</span></code> permite que el contenedor ocupe todo el ancho disponible en la ventana del navegador.</p></li>
<li><p>Se agregó un título principal a la aplicación usando <code class="docutils literal notranslate"><span class="pre">html.H1</span></code> con el texto “Dashboard de Colonias de Abejas”. Además, se aplicaron estilos CSS personalizados a este título mediante la propiedad <code class="docutils literal notranslate"><span class="pre">className='my-4'</span></code>, que agrega un margen en la parte superior y en la parte inferior del título.</p></li>
<li><p>Se creó un nuevo componente <code class="docutils literal notranslate"><span class="pre">dcc.Dropdown</span></code> que permite al usuario seleccionar las causas de la enfermedad. Las opciones del menú desplegable se generan dinámicamente a partir de los enfermedades únicas en los datos utilizando una comprensión de lista. Esto mejora la interactividad al permitir al usuario seleccionar un año y una causa de enfermedad directamente desde los datos disponibles. Además, se estableció el <code class="docutils literal notranslate"><span class="pre">ancho</span> <span class="pre">del</span> <span class="pre">menú</span> <span class="pre">desplegable</span> <span class="pre">al</span> <span class="pre">100%</span> </code>del contenedor padre utilizando la propiedad style.</p></li>
<li><p>Se añadió un gráfico de coropletas utilizando el componente <code class="docutils literal notranslate"><span class="pre">dcc.Graph</span></code>. La propiedad <code class="docutils literal notranslate"><span class="pre">config</span></code> se utilizó para ocultar la barra de modos de visualización, lo que proporciona una experiencia más limpia y enfocada en la visualización de datos.</p></li>
<li><p>Finalmente, se agregó una tabla de datos interactiva utilizando el componente <code class="docutils literal notranslate"><span class="pre">dash_table.DataTable</span></code>. Las columnas de la tabla se especificaron mediante la propiedad columns, que se genera dinámicamente a partir de las columnas en el DataFrame df. Se aplicaron estilos a la tabla para que los datos se ajusten de manera adecuada y para permitir el desplazamiento horizontal en caso de que haya muchas columnas. También se configuró la propiedad page_size para mostrar un número limitado de filas por página y permitir al usuario navegar por las páginas. Además, se habilitó la exportación de datos en formato CSV y se incluyeron los nombres de las columnas en la exportación.</p></li>
</ul>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Diseño de la aplicación</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dbc</span><span class="o">.</span><span class="n">Container</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="s2">&quot;Bee colony diseases in USA&quot;</span><span class="p">,</span> <span class="n">className</span><span class="o">=</span><span class="s1">&#39;my-4&#39;</span><span class="p">),</span>  <span class="c1"># Estilos CSS personalizados</span>
        <span class="n">dbc</span><span class="o">.</span><span class="n">Row</span><span class="p">([</span>
            <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;slct_year&quot;</span><span class="p">,</span>
                                 <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">year</span><span class="p">}</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()],</span>
                                 <span class="n">multi</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">value</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
                                 <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s2">&quot;100%&quot;</span><span class="p">}),</span>
                    <span class="n">md</span><span class="o">=</span><span class="mi">6</span><span class="p">),</span>  <span class="c1"># Columna para el filtro de año</span>
            <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;slct_affected_by&quot;</span><span class="p">,</span>
                                 <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">disease</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">disease</span><span class="p">}</span> <span class="k">for</span> <span class="n">disease</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Affected by&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()],</span>
                                 <span class="n">multi</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">value</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Affected by&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                 <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s2">&quot;100%&quot;</span><span class="p">}),</span>
                    <span class="n">md</span><span class="o">=</span><span class="mi">6</span><span class="p">),</span>  <span class="c1"># Columna para el filtro de enfermedad &quot;Affected by&quot;</span>
        <span class="p">]),</span>
        <span class="n">dbc</span><span class="o">.</span><span class="n">Row</span><span class="p">([</span>
            <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;my_bee_map&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;displayModeBar&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}),</span> <span class="n">md</span><span class="o">=</span><span class="mi">12</span><span class="p">),</span>  <span class="c1"># Gráfico de coropletas</span>
        <span class="p">]),</span>
        <span class="n">dbc</span><span class="o">.</span><span class="n">Row</span><span class="p">([</span>
            <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">dash_table</span><span class="o">.</span><span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">,</span>
                                         <span class="n">columns</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">],</span>  <span class="c1"># Tabla de datos</span>
                                         <span class="n">style_data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;whiteSpace&#39;</span><span class="p">:</span> <span class="s1">&#39;normal&#39;</span><span class="p">},</span>
                                         <span class="n">style_table</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;overflowX&#39;</span><span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">},</span>
                                         <span class="n">page_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                                         <span class="n">export_format</span><span class="o">=</span><span class="s1">&#39;csv&#39;</span><span class="p">,</span>
                                         <span class="n">export_headers</span><span class="o">=</span><span class="s1">&#39;names&#39;</span><span class="p">),</span>
                    <span class="n">md</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
        <span class="p">]),</span>
    <span class="p">],</span> <span class="n">fluid</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">])</span>
</pre></div>
</div>
</section>
<section id="actualizacion-de-graficos-y-tablas">
<h3>Actualización de gráficos y tablas<a class="headerlink" href="#actualizacion-de-graficos-y-tablas" title="Permalink to this heading">#</a></h3>
<p>En la sección de callback para actualizar el gráfico y la tabla, se realizaron varios cambios con respecto al código original:</p>
<ul class="simple">
<li><p>Se agregó un segundo Output al callback. Además de actualizar el gráfico (‘my_bee_map’), ahora también se actualiza la tabla (‘table’) con nuevos datos.</p></li>
<li><p>Se utilizó el DataFrame dff para filtrar los datos basados en el año seleccionado por el usuario. Esto asegura que tanto el gráfico como la tabla muestren datos correspondientes al año elegido.</p></li>
<li><p>En el gráfico de coropletas (fig), se configuró la propiedad template como ‘plotly_white’. Esto establece un tema claro para el gráfico. También se especificó color_continuous_scale para controlar la escala de colores utilizada en el mapa.</p></li>
<li><p>En la tabla, se utiliza el método .to_dict(‘records’) para convertir el DataFrame dff en una lista de diccionarios que son compatibles con el formato de datos requerido por la tabla de Dash. Esto asegura que la tabla muestre los datos correctamente según el año seleccionado.</p></li>
</ul>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Callback para actualizar el gráfico</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="p">[</span><span class="n">Output</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;my_bee_map&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;figure&#39;</span><span class="p">),</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;slct_year&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">),</span>
     <span class="n">Input</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;slct_affected_by&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">year_selected</span><span class="p">,</span> <span class="n">affected_by_selected</span><span class="p">):</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">year_selected</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Affected by&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">affected_by_selected</span><span class="p">)]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">choropleth</span><span class="p">(</span><span class="n">data_frame</span><span class="o">=</span><span class="n">dff</span><span class="p">,</span>
                        <span class="n">locationmode</span><span class="o">=</span><span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
                        <span class="n">locations</span><span class="o">=</span><span class="s1">&#39;state_code&#39;</span><span class="p">,</span>
                        <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;usa&quot;</span><span class="p">,</span>
                        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">,</span>
                        <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">],</span>
                        <span class="n">color_continuous_scale</span><span class="o">=</span><span class="n">px</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">YlOrRd</span><span class="p">,</span>
                        <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f Bee Colonies&#39;</span><span class="p">},</span>
                        <span class="n">template</span><span class="o">=</span><span class="s1">&#39;plotly_white&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">dff</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>El código completo de la aplicación se presenta a continuación:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>
<span class="kn">import</span> <span class="nn">dash_bootstrap_components</span> <span class="k">as</span> <span class="nn">dbc</span>  <span class="c1"># Librería para estilos Bootstrap</span>
<span class="kn">import</span> <span class="nn">dash_table</span>

<span class="c1"># Cambiar el tema de la aplicación a &quot;Flatly&quot; de Dash Bootstrap Components</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">dbc</span><span class="o">.</span><span class="n">themes</span><span class="o">.</span><span class="n">FLATLY</span><span class="p">])</span>

<span class="c1"># Leer los datos</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/lihkir/Uninorte/main/AppliedStatisticMS/DataVisualizationRPython/Lectures/Python/PythonDataSets/intro_bees.csv&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;ANSI&#39;</span><span class="p">,</span> <span class="s1">&#39;Affected by&#39;</span><span class="p">,</span> <span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;state_code&#39;</span><span class="p">])[[</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Diseño de la aplicación</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="n">dbc</span><span class="o">.</span><span class="n">Container</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="s2">&quot;Bee colony diseases in USA&quot;</span><span class="p">,</span> <span class="n">className</span><span class="o">=</span><span class="s1">&#39;my-4&#39;</span><span class="p">),</span>  <span class="c1"># Estilos CSS personalizados</span>
        <span class="n">dbc</span><span class="o">.</span><span class="n">Row</span><span class="p">([</span>
            <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;slct_year&quot;</span><span class="p">,</span>
                                 <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">year</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">year</span><span class="p">}</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()],</span>
                                 <span class="n">multi</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">value</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
                                 <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s2">&quot;100%&quot;</span><span class="p">}),</span>
                    <span class="n">md</span><span class="o">=</span><span class="mi">6</span><span class="p">),</span>  <span class="c1"># Columna para el filtro de año</span>
            <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;slct_affected_by&quot;</span><span class="p">,</span>
                                 <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">disease</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">disease</span><span class="p">}</span> <span class="k">for</span> <span class="n">disease</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Affected by&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()],</span>
                                 <span class="n">multi</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">value</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Affected by&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                 <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s2">&quot;100%&quot;</span><span class="p">}),</span>
                    <span class="n">md</span><span class="o">=</span><span class="mi">6</span><span class="p">),</span>  <span class="c1"># Columna para el filtro de enfermedad &quot;Affected by&quot;</span>
        <span class="p">]),</span>
        <span class="n">dbc</span><span class="o">.</span><span class="n">Row</span><span class="p">([</span>
            <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;my_bee_map&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;displayModeBar&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}),</span> <span class="n">md</span><span class="o">=</span><span class="mi">12</span><span class="p">),</span>  <span class="c1"># Gráfico de coropletas</span>
        <span class="p">]),</span>
        <span class="n">dbc</span><span class="o">.</span><span class="n">Row</span><span class="p">([</span>
            <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">dash_table</span><span class="o">.</span><span class="n">DataTable</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">,</span>
                                         <span class="n">columns</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">],</span>  <span class="c1"># Tabla de datos</span>
                                         <span class="n">style_data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;whiteSpace&#39;</span><span class="p">:</span> <span class="s1">&#39;normal&#39;</span><span class="p">},</span>
                                         <span class="n">style_table</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;overflowX&#39;</span><span class="p">:</span> <span class="s1">&#39;auto&#39;</span><span class="p">},</span>
                                         <span class="n">page_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                                         <span class="n">export_format</span><span class="o">=</span><span class="s1">&#39;csv&#39;</span><span class="p">,</span>
                                         <span class="n">export_headers</span><span class="o">=</span><span class="s1">&#39;names&#39;</span><span class="p">),</span>
                    <span class="n">md</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
        <span class="p">]),</span>
    <span class="p">],</span> <span class="n">fluid</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">])</span>

<span class="c1"># Callback para actualizar el gráfico</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="p">[</span><span class="n">Output</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;my_bee_map&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;figure&#39;</span><span class="p">),</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;slct_year&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">),</span>
     <span class="n">Input</span><span class="p">(</span><span class="n">component_id</span><span class="o">=</span><span class="s1">&#39;slct_affected_by&#39;</span><span class="p">,</span> <span class="n">component_property</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">year_selected</span><span class="p">,</span> <span class="n">affected_by_selected</span><span class="p">):</span>
    <span class="n">dff</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">year_selected</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Affected by&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">affected_by_selected</span><span class="p">)]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">choropleth</span><span class="p">(</span><span class="n">data_frame</span><span class="o">=</span><span class="n">dff</span><span class="p">,</span>
                        <span class="n">locationmode</span><span class="o">=</span><span class="s1">&#39;USA-states&#39;</span><span class="p">,</span>
                        <span class="n">locations</span><span class="o">=</span><span class="s1">&#39;state_code&#39;</span><span class="p">,</span>
                        <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;usa&quot;</span><span class="p">,</span>
                        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">,</span>
                        <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">],</span>
                        <span class="n">color_continuous_scale</span><span class="o">=</span><span class="n">px</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">sequential</span><span class="o">.</span><span class="n">YlOrRd</span><span class="p">,</span>
                        <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Pct of Colonies Impacted&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f Bee Colonies&#39;</span><span class="p">},</span>
                        <span class="n">template</span><span class="o">=</span><span class="s1">&#39;plotly_white&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="n">dff</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>

<span class="c1"># Ejecutar la aplicación</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># &lt;- For testing purposes</span>
    <span class="c1">#app.run_server(debug=True, host=&#39;0.0.0.0&#39;, port=9000) # &lt;- To Dockerize the Dash</span>
</pre></div>
</div>
</section>
<section id="test-de-la-aplicacion">
<h3>Test de la aplicación<a class="headerlink" href="#test-de-la-aplicacion" title="Permalink to this heading">#</a></h3>
<p>Una vez agregado el código del dash que queremos dockerizar, lo sometemos a una prueba local, para identificar si está ejecutando correctamente, y si está logrando los objetivos de visualización. Se usa este código desde la consola:</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="n">python</span><span class="p">.</span><span class="n">exe</span> <span class="p">.\</span><span class="n">dashapp</span><span class="p">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Puede surgir un error asociado a requerimientos de instalación de librerías. Al finalizar la instalación, ejecuta la app nuevamente. Vale la pena resaltar que dentro del archivo .py, para la ejecución de la app se habilitó la siguiente linea de código:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="image" src="_images/dashapp.png" /></p>
<p style="text-align: center; width: 100%;">Figura 2. Prueba local de la aplicación</p>
</section>
</section>
<section id="archivo-de-requerimientos-y-dockerfile">
<h2>Archivo de requerimientos y Dockerfile<a class="headerlink" href="#archivo-de-requerimientos-y-dockerfile" title="Permalink to this heading">#</a></h2>
<p>Para crear el archivo de requerimientos, dentro de esta carpeta se ejecutó desde la consola:</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">freeze</span> <span class="p">&gt;</span> <span class="n">requirements</span><span class="p">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>El siguiente paso es crear nuestro archivo Dockerfile que va a generar nuestra imagen Docker. Para esto, creamos un archivo nombrado <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> sin ninguna extensión, dentro de la carpeta del proyecto <code class="docutils literal notranslate"><span class="pre">docker_dash_mapa</span></code>. Dentro del archivo, se ubicó el siguiente código:</p>
<div class="highlight-Plain notranslate"><div class="highlight"><pre><span></span>FROM python:3.9.17

COPY ./requirements.txt /requirements.txt

RUN pip install --upgrade pip
RUN pip install --no-cache-dir --upgrade -r /requirements.txt

COPY ./dashapp.py /dashapp.py

CMD [&quot;python&quot;, &quot;dashapp.py&quot;]
</pre></div>
</div>
<p>Finalmente, se crea un archivo <code class="docutils literal notranslate"><span class="pre">README</span></code> el cual contiene instrucciones para ejecutar el contenedor con el dashborad. Estas instrucciones se registran a continuación:</p>
<div class="highlight-Plain notranslate"><div class="highlight"><pre><span></span># Execute the following commands to Dockerize the Dash application

docker build -t dash_mapa .
docker run -h localhost -p 9002:9000 -d --name dashapp dash_mapa
</pre></div>
</div>
<p>La primera línea de código construye en contenedor Docker basado en el Dockerfile y lo nombra dash_mapa.</p>
<p><img alt="image" src="_images/build_image_docker.png" /></p>
<p style="text-align: center; width: 100%;">Figura 3. Imágen creada dentro de Docker</p>
<p>La segunda línea ejecuta la orden para exponer la aplicación Dash en localhost:9002. La expresión 9002:9000 significa mapear el puerto 9000 en el contenedor al puerto 9002 en el entorno local. La razón para mapear el puerto 9000 del contenedor es porque se declaró la aplicación Dash en el puerto 9000 en el script Python.</p>
<p><img alt="image" src="_images/build_container_docker.png" /></p>
<p style="text-align: center; width: 100%;">Figura 4. El contendor creado `dashapp` contiene la imágen del dashboard `dash_map`</p></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="00_Despliegue_apps.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Despliegue de aplicaciones con Docker</p>
      </div>
    </a>
    <a class="right-next"
       href="02_DockerDash_Financiero.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Dash Financiero</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#construccion-de-la-aplicacion">Construcción de la aplicación</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importacion-de-requerimientos-y-cargue-de-datos">Importación de requerimientos y cargue de datos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#diseno-y-estructura-de-la-aplicacion-dash">Diseño y estructura de la aplicación Dash</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizacion-de-graficos-y-tablas">Actualización de gráficos y tablas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#test-de-la-aplicacion">Test de la aplicación</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#archivo-de-requerimientos-y-dockerfile">Archivo de requerimientos y Dockerfile</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Sandra Maldonado - Sherine Menco
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=c5ced968eda925caa686"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=c5ced968eda925caa686"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>